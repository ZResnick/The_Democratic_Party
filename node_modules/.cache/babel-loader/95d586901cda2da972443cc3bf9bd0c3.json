{"ast":null,"code":"var _jsxFileName = \"/Users/zacharyresnick/Desktop/The_Democratic_Party/the_democratic_party/src/components/mainPages/AdminPage.js\";\nimport React, { Component } from 'react';\nimport { addASong } from '../../store/reducers/songReducer';\nimport { connect } from 'react-redux';\nimport Spotify from './Spotify'; //connect certain compomnents with the firestore using the firestoreConnect and compose at the bottom of this file:\n\nimport { firestoreConnect } from 'react-redux-firebase';\nimport { compose } from 'redux';\nimport SpotifyWebApi from 'spotify-web-api-js';\nvar spotifyApi = new SpotifyWebApi();\nexport class AdminPage extends Component {\n  constructor() {\n    super();\n\n    this.handelChange = async evt => {\n      this.setState({\n        [evt.target.id]: evt.target.value\n      });\n      await spotifyApi.searchTracks(this.state.title, null, (err, data) => {\n        this.setState({\n          possibleSongs: data\n        });\n      });\n    };\n\n    this.handelSubmit = async evt => {\n      evt.preventDefault();\n      await spotifyApi.searchTracks(this.state.title, null, (err, data) => {\n        //could put a utility feature here to filter songs by track and artist but going to simplest option first, taking rhe first song\n        let firstSong = data && data.tracks.items[0];\n\n        if (!firstSong) {\n          alert(\"That song doen't seem to exist.  Please check your spelling and try again.\");\n        } else {\n          let songToAdd = {\n            title: firstSong.name,\n            artist: firstSong.artists[0].name,\n            album: firstSong.album.name,\n            length: firstSong.duration_ms,\n            upvotes: 0,\n            songId: firstSong.id,\n            uri: firstSong.uri\n          };\n          this.props.addASong(songToAdd);\n        }\n      });\n      this.setState({\n        title: '',\n        artist: '',\n        album: '',\n        length: ''\n      });\n    };\n\n    this.state = {\n      title: '',\n      artist: '',\n      album: '',\n      length: '',\n      token: '',\n      possibleSongs: ''\n    };\n    this.handleChange = this.handelChange.bind(this);\n    this.handleSubmit = this.handelSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    let _token = this.props.token && this.props.token[0];\n\n    if (_token) {\n      // Set token\n      this.setState({\n        token: _token.token\n      });\n      spotifyApi.setAccessToken(_token.token);\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      className: \"white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      className: \"grey-text text-darken-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"Add a Song By Title:\"), React.createElement(\"div\", {\n      className: \"input-field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"Song Title\"), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"title\",\n      value: this.state.title,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    })), this.state.title && this.state.possibleSongs && this.state.possibleSongs.tracks && this.state.possibleSongs.tracks.items && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"Possible Songs...\"), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, this.state.possibleSongs.tracks.items.map(song => {\n      return React.createElement(\"li\", {\n        key: song.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, song.name, \", \", song.artists[0].name);\n    }))), React.createElement(\"div\", {\n      className: \"input-field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn pink lighten-1 z-depth-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"Add Song\")))), React.createElement(Spotify, {\n      className: \"spotifyPlayer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }));\n  }\n\n}\n\nconst mapDispatchToProps = dispatch => ({\n  addASong: song => {\n    dispatch(addASong(song));\n  }\n});\n\nconst mapStateToProps = state => {\n  return {\n    token: state.firestore.ordered.spotifyToken\n  };\n};\n\nexport default compose(connect(mapStateToProps, mapDispatchToProps), firestoreConnect([{\n  collection: 'spotifyToken'\n}]))(AdminPage);","map":{"version":3,"sources":["/Users/zacharyresnick/Desktop/The_Democratic_Party/the_democratic_party/src/components/mainPages/AdminPage.js"],"names":["React","Component","addASong","connect","Spotify","firestoreConnect","compose","SpotifyWebApi","spotifyApi","AdminPage","constructor","handelChange","evt","setState","target","id","value","searchTracks","state","title","err","data","possibleSongs","handelSubmit","preventDefault","firstSong","tracks","items","alert","songToAdd","name","artist","artists","album","length","duration_ms","upvotes","songId","uri","props","token","handleChange","bind","handleSubmit","componentDidMount","_token","setAccessToken","render","map","song","mapDispatchToProps","dispatch","mapStateToProps","firestore","ordered","spotifyToken","collection"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { addASong } from '../../store/reducers/songReducer';\nimport { connect } from 'react-redux';\nimport Spotify from './Spotify';\n\n//connect certain compomnents with the firestore using the firestoreConnect and compose at the bottom of this file:\nimport { firestoreConnect } from 'react-redux-firebase';\nimport { compose } from 'redux';\nimport SpotifyWebApi from 'spotify-web-api-js';\nvar spotifyApi = new SpotifyWebApi();\n\nexport class AdminPage extends Component {\n  constructor() {\n    super();\n    this.state = {\n      title: '',\n      artist: '',\n      album: '',\n      length: '',\n      token: '',\n      possibleSongs: '',\n    };\n\n    this.handleChange = this.handelChange.bind(this);\n    this.handleSubmit = this.handelSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    let _token = this.props.token && this.props.token[0];\n    if (_token) {\n      // Set token\n      this.setState({\n        token: _token.token,\n      });\n      spotifyApi.setAccessToken(_token.token);\n    }\n  }\n\n  handelChange = async evt => {\n    this.setState({\n      [evt.target.id]: evt.target.value,\n    });\n    await spotifyApi.searchTracks(this.state.title, null, (err, data) => {\n      this.setState({\n        possibleSongs: data,\n      });\n    });\n  };\n\n  handelSubmit = async evt => {\n    evt.preventDefault();\n    await spotifyApi.searchTracks(this.state.title, null, (err, data) => {\n      //could put a utility feature here to filter songs by track and artist but going to simplest option first, taking rhe first song\n      let firstSong = data && data.tracks.items[0];\n      if (!firstSong) {\n        alert(\n          \"That song doen't seem to exist.  Please check your spelling and try again.\"\n        );\n      } else {\n        let songToAdd = {\n          title: firstSong.name,\n          artist: firstSong.artists[0].name,\n          album: firstSong.album.name,\n          length: firstSong.duration_ms,\n          upvotes: 0,\n          songId: firstSong.id,\n          uri: firstSong.uri,\n        };\n        this.props.addASong(songToAdd);\n      }\n    });\n    this.setState({\n      title: '',\n      artist: '',\n      album: '',\n      length: '',\n    });\n  };\n\n  render() {\n    return (\n      <div>\n        <div className=\"container\">\n          <form onSubmit={this.handleSubmit} className=\"white\">\n            <h5 className=\"grey-text text-darken-3\">Add a Song By Title:</h5>\n            <div className=\"input-field\">\n              <label htmlFor=\"title\">Song Title</label>\n              <input\n                type=\"text\"\n                id=\"title\"\n                value={this.state.title}\n                onChange={this.handleChange}\n              />\n            </div>\n            {this.state.title &&\n              this.state.possibleSongs &&\n              this.state.possibleSongs.tracks &&\n              this.state.possibleSongs.tracks.items && (\n                <div>\n                  <h4>Possible Songs...</h4>\n                  <ul>\n                    {this.state.possibleSongs.tracks.items.map(song => {\n                      return (\n                        <li key={song.id}>\n                          {song.name}, {song.artists[0].name}\n                        </li>\n                      );\n                    })}\n                  </ul>\n                </div>\n              )}\n            <div className=\"input-field\">\n              <button className=\"btn pink lighten-1 z-depth-0\">Add Song</button>\n            </div>\n          </form>\n        </div>\n        <Spotify className=\"spotifyPlayer\" />\n      </div>\n    );\n  }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  addASong: song => {\n    dispatch(addASong(song));\n  },\n});\n\nconst mapStateToProps = state => {\n  return {\n    token: state.firestore.ordered.spotifyToken,\n  };\n};\n\nexport default compose(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  ),\n  firestoreConnect([{ collection: 'spotifyToken' }])\n)(AdminPage);\n"]},"metadata":{},"sourceType":"module"}